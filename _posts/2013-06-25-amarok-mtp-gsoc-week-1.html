---
layout: post
title: 'Amarok MTP GSoC: week 1'
date: '2013-06-25T01:19:00.000+02:00'
author: strohel
tags:
- amarok
- gsoc
- kde
modified_time: '2013-06-25T01:19:25.466+02:00'
thumbnail: http://1.bp.blogspot.com/-sX3pM2PT7dY/UcjPu25sYiI/AAAAAAAAAQE/b6LHVSCfqQc/s72-c/GSoC2013-MTP-w1-collection.png
blogger_id: tag:blogger.com,1999:blog-4406477566892767740.post-3002583258028094001
blogger_orig_url: https://strohel.blogspot.com/2013/06/amarok-mtp-gsoc-week-1.html
---

<div style="text-align: justify;">Hi, this is my first weekly report describing my work on my Google Summer of Code project to <a href="https://google-melange.appspot.com/gsoc/project/google/gsoc2013/strohel/32001">rewrite MTP (Android) support in Amarok from scratch</a>. This week I've laid the very basic building blocks and I even have some screen-shots. :-)</div><br />

<table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: 0px; margin-right: 0px; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-sX3pM2PT7dY/UcjPu25sYiI/AAAAAAAAAQE/b6LHVSCfqQc/s1600/GSoC2013-MTP-w1-collection.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="281" src="http://1.bp.blogspot.com/-sX3pM2PT7dY/UcjPu25sYiI/AAAAAAAAAQE/b6LHVSCfqQc/s640/GSoC2013-MTP-w1-collection.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Entries for the newly (re)written MTP collections show up at appropriate places</td></tr></tbody></table><br />
<div style="text-align: justify;"><b>What I've done this week:</b></div><ul style="text-align: justify;"><li>Got rid of the old MTP collection implementation and cleaned up some stuff that is no longer needed</li><li>Started new MTP implementation by coding <i>MtpCollectionFactory</i>, which is responsible for creating collections for devices as they are plugged in and destroying collections for removed devices. This works fine now and the class is 95% done now.</li><li>Created stub <i>MtpCollection</i> class so that we can show something in the Collection Browser.</li><li>Created .desktop file for Solid so that an action to open MTP devices with Amarok shows up in Plasma Device Notifier, see below.<br />

<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-2eMKHBUusvY/UcjRxWuU4fI/AAAAAAAAAQU/E4CunPRV-6s/s1600/GSoC2013-MTP-w1-Device-Notifier.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://2.bp.blogspot.com/-2eMKHBUusvY/UcjRxWuU4fI/AAAAAAAAAQU/E4CunPRV-6s/s1600/GSoC2013-MTP-w1-Device-Notifier.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Device Notifier showing Amarok action</td></tr></tbody></table><br />
</li></ul><b>Problems I've faced:</b><br />
<ul><li>None yet, they are expected later. :-)</li></ul><b>What's next:</b><br />
<ul><li>Great deal of work on <i>MtpCollection</i> regarding track and other metadata parsing, libmtp interaction, threading, locking...</li></ul>You can view and test my code by checking out <a href="http://quickgit.kde.org/?p=clones%2Famarok%2Flaitl%2Famarok.git&amp;a=shortlog&amp;h=gsoc">gsoc branch of my personal Amarok clone repository</a>.