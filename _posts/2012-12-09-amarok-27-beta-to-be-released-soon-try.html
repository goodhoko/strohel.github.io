---
layout: post
title: Amarok 2.7 Beta To Be Released Soon, Try Statistics Synchronization!
date: '2012-12-09T16:48:00.000+01:00'
author: strohel
tags:
- amarok
- kde
modified_time: '2012-12-16T15:10:37.205+01:00'
thumbnail: http://4.bp.blogspot.com/-Lpt_Nx-4qaE/UMRzv1YE4QI/AAAAAAAAAJk/ZnCn7ide6zE/s72-c/iPod-connected-dialog.png
blogger_id: tag:blogger.com,1999:blog-4406477566892767740.post-1586766122813847157
blogger_orig_url: https://strohel.blogspot.com/2012/12/amarok-27-beta-to-be-released-soon-try.html
---

<div style="text-align: justify;">Heya, Amarok 2.7 Beta is slated to be released in any day now, one of the features it brings is <a href="http://strohel.blogspot.com/search/label/gsoc">Statistics Synchronization, a result of my GSoC project</a>. Here's a short guide to get the best from it.<br />

</div><h3>Unattended Synchronization</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Lpt_Nx-4qaE/UMRzv1YE4QI/AAAAAAAAAJk/ZnCn7ide6zE/s1600/iPod-connected-dialog.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="/images/2012-12-09-amarok-27-beta-to-be-released-soon-try-iPod-connected-dialog.png" /></a></div><div style="text-align: justify;">Getting started is utterly simple, just answer <b>Yes</b> to the above question that pops up when you connect a capable media player (currently just iPods) and you're done! Amarok will work hard in the background from that point to make sure your ratings, first/last played times, play counts and labels are synchronized between all participating collections (Local Collection is included by default) and won't disturb you unless there's a conflict. If you have <b>Last.fm plugin</b> configured, tracks recently played on your iDevice will be automatically scrobbled to Last.fm as part of the synchronization.</div><div style="text-align: justify;"><br />
</div><h3 style="text-align: justify;">Conflicts &amp; Synchronize Statistics Dialog</h3><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-l8NuehcOun8/UMRzu1BYOPI/AAAAAAAAAJg/I5gESfiuJPQ/s1600/MatchedTracksPage.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="297" src="/images/2012-12-09-amarok-27-beta-to-be-released-soon-try-MatchedTracksPage.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: justify;">When you for example change a song rating simultaneously in Amarok and on your iPod, Amarok doesn't know what rating it should use. In this case, the last step of the synchronization is made interactive: a dialog with synchronization preview shows up. On top, you can see a few tabs:</div><ul style="text-align: justify;"><li><b>Matched Tracks</b>: the essential tab where the tracks that Amarok found to be in more than one of your Collections are grouped together. You can tell which tracks and fields are going to be updated using the background: light green above means a new/updated field and light red means an old/overwritten one. In case of rating or label conflict you can resolve it using the check boxes. Conflicts can also be resolved in batch using the buttons below the list, which affect all applicable tracks, not just the shown ones. You don't need to resolve all conflicts, the particular field of the particular tracks won't be synchronized.</li><li><b>Unique Tracks</b>: a list of tracks found just in one collection. You can use this as a some kind of a <i>difference view</i> of your collections. This tab supports track dragging.</li><li><b>Excluded Tracks</b>: sometimes a track matching is ambiguous. This can happen for example when you have 2 tracks with identical meta-data in your collection. Such tracks are excluded from synchronization in order not to cause disorder.</li></ul><h3>Manual Syncing &amp; Last.fm</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-zhESCdEvWs8/UMRztMtg7gI/AAAAAAAAAJU/SvbCMoLjXK8/s1600/ChooseProvidersPage.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="333" src="/images/2012-12-09-amarok-27-beta-to-be-released-soon-try-ChooseProvidersPage.png" width="400" /></a></div><div style="text-align: justify;">At any time, you can start the synchronization manually from Amarok <b>Tools</b> menu using the <b>Synchronize Statistics...</b> entry. You can override what collections and fields to synchronize in this case. If you have <b>Last.fm</b> plugin enabled and configured, you can also choose to synchronize your play count and labels with Last.fm; unattended synchronization with Last.fm is not possible, because that would put too much stress on their servers. Also please note that track matching when Last.fm is selected can be very time-consuming (one hour is not unusual), but you can use Amarok freely while this happens.</div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-1kEIJNU1XPs/UMSde_Sq0WI/AAAAAAAAAJ4/OFxGaLzT7nw/s1600/last.fm-spelling-correction.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="200" src="/images/2012-12-09-amarok-27-beta-to-be-released-soon-try-last.fm-spelling-correction.png" width="400" /></a></div><div style="text-align: justify;">Synchronizing with Last.fm is a bit tricky, because by default it auto-corrects some common misspellings during scrobbling. So it can happen that even if you scrobble many track plays, it doesn't show up in Matched Tracks because Last.fm knows it under a slightly different name. Fortunately you can opt-out from auto-correction on Last.fm site and the change is applied also to your past scrobbles, both options have some downsides though:</div><ol style="text-align: justify;"><li>auto-correct off: your tracks are matched properly, but if you change your tags after some time (because of an actual typo for example), your play-count on Last.fm site will be split into 2 entries.</li><li>auto-correct on: can track play counts even if you correct the tags over time, but you have to use Last.fm's preferred spelling or your track's won't match. </li></ol><h3>Configuration</h3><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-A_jzk7Vsro0/UMRzrPECYTI/AAAAAAAAAJI/isnFTmnObtU/s1600/AmarokConfigMetadata.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="313" src="/images/2012-12-09-amarok-27-beta-to-be-released-soon-try-AmarokConfigMetadata.png" width="400" /></a></div><div style="text-align: justify;">You can configure all aspects of statistics synchronization in a new Amarok Configuration tab named <b>Metadata</b>. Apart from configuring which collections should be synchronized automatically you can decide what fields you want to synchronize and edit a list of labels excluded from synchronization (useful if don't what some of your Amarok labels to appear on your Last.fm profile).</div><div style="text-align: justify;"><br />
</div><h3 style="text-align: justify;">Technical Remarks</h3><div class="separator" style="clear: both; text-align: center;"></div><div style="text-align: justify;">Curious what the internal algorithms and principles of the synchronization are? Here you go:</div><ul style="text-align: justify;"><li>Tracks are matched using their meta-data case insensitively. The framework itself and both iPod and Local Amarok collections can match using: title, artist, album, composer, year, track number, disc number. Last.fm can only match using title, artist and album. Common subset of matching fields of selected collections is used. That's why you can get tracks excluded from synchronization due to ambiguity when you include Last.fm in syncing.</li><li>Local Collection can synchronize everything.</li><li>iPod Collection can synchronize everything except labels, although and iPod won't update first played time by itself.</li><li>Last.fm can read play count, labels and rating (see below) and it can write labels and rating; play count is updated by means of scrobbling. In theory, first/last played time should be available too, but their API doesn't export it currently in a efficient way.</li><li>Last.fm rating is implemented using special tags like <i>4 of 10 stars</i>. You can opt-out from using these, then Amarok will ignore this kind of tags.</li><li>Conservative reduction functions are used for synchronization of individual fields, for example minimum-of is employed for first played time and maximum-of for last played time. Play count uses maximum-of + special case for iPods that can report <i>recent play count</i> so that you don't miss anything even if you play a track simultaneously on an iPod and Amarok. </li></ul><h3>Tips</h3><ul><li>Use Last.fm synchronization as a back-up of your precious Amarok data!</li><li>Use Last.fm synchronization as a tool to synchronize your listening data from multiple places!</li><li><b>New!</b> Use inter-collection synchronization and the new <i>Nepomuk Collection</i> to keep your Amarok ratings in sync with your Nepomuk (i.e. shown in Dolphin) ones. Nepomuk collection should be able to handle more fields in future.</li></ul><h3>Test it!</h3><div style="text-align: justify;">I've worked on this and tested it myself for a rather long time, but there will be for sure some bugs that got through. Please test this in Amarok 2.7 Beta or current git and <a href="https://bugs.kde.org/enter_bug.cgi?product=amarok&amp;component=Tools/Statistics%20Synchronization">report any bugs you find</a> so that I have a chance to fix them for Amarok 2.7 final. Thanks and have fun!</div>
