---
layout: post
title: 'Amarok MTP (Android) GSoC: week 2'
date: '2013-06-30T01:47:00.003+02:00'
author: strohel
tags:
- amarok
- gsoc
- kde
modified_time: '2020-06-12T19:50:56.326+02:00'
thumbnail: http://3.bp.blogspot.com/-u_tG0FF8RyI/Uc9teVoZxpI/AAAAAAAAAQ4/irEJs5y1GCY/s72-c/GSoC2013-MTP-w2-refresh.png
blogger_id: tag:blogger.com,1999:blog-4406477566892767740.post-8399199652040752487
blogger_orig_url: https://strohel.blogspot.com/2013/06/amarok-mtp-android-gsoc-week-2.html
---

<div style="text-align: justify;">Heya, this is my second weekly report describing my work on my Google Summer of Code project to <a href="https://google-melange.appspot.com/gsoc/project/google/gsoc2013/strohel/32001">rewrite MTP (Android) support in Amarok from scratch</a>. This week I've done a lot of work on MtpCollection class regarding device initialization.</div><br />

<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><img border="0" height="363" src="http://3.bp.blogspot.com/-u_tG0FF8RyI/Uc9teVoZxpI/AAAAAAAAAQ4/irEJs5y1GCY/s640/GSoC2013-MTP-w2-refresh.png" style="margin-left: auto; margin-right: auto;" width="640" /></td></tr><tr><td class="tr-caption" style="text-align: center;">Information for Android users</td></tr></tbody></table><br />
<div class="separator" style="clear: both; text-align: justify;"><b>What I've done this week:</b></div><ul><li>MTP devices detected by Solid are actually matched with the ones that libmtp sees.</li><li>Created an asynchronous job to initialize the MTP device for use by Amarok (query vendor, product, serial number, supported file types, ...).</li><li>Created an asynchronous job to list device storage drives.</li><li>Added a refresh button to trigger rebuilding the list of available storage and the list of tracks (in future).</li><li>Added support for showing device capacity and free space:<br />

<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-NjQ_HPvlUeQ/Uc9tdViCvXI/AAAAAAAAAQ0/rYsZytSF5ls/s379/GSoC2013-MTP-w2-capacity.png" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://3.bp.blogspot.com/-NjQ_HPvlUeQ/Uc9tdViCvXI/AAAAAAAAAQ0/rYsZytSF5ls/s1600/GSoC2013-MTP-w2-capacity.png" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Everyone loves the nice capacity bars</td></tr></tbody></table><br />
</li><li>Started working on a job to parse tracks found on the device (not presented in the UI yet).</li></ul><b>Problems I've faced:</b><br />
<ul><li>Forgetting to call LIBMTP_Initialize() leads to strange errors. :-)</li></ul><b>What's next:</b><br />
<ul><li>Diving into full meta system: MtpTrack, album, artist, ...</li></ul><b> </b>You can view and test my code by checking out <a href="http://quickgit.kde.org/?p=clones%2Famarok%2Flaitl%2Famarok.git&amp;a=shortlog&amp;h=gsoc">gsoc branch of my personal Amarok clone repository</a>. And finally...<br />
<br />

<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-NT1oYnGp3Y0/XuPACZq_r9I/AAAAAAAAQZY/QJG1EMvFyhwpGpXnrn0B2jpHPIboIxJYgCK4BGAsYHg/s400/Ak2013Badge2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="178" data-original-width="400" src="https://1.bp.blogspot.com/-NT1oYnGp3Y0/XuPACZq_r9I/AAAAAAAAQZY/QJG1EMvFyhwpGpXnrn0B2jpHPIboIxJYgCK4BGAsYHg/s320/Ak2013Badge2.png" width="320" /></a></div></td></tr><tr><td class="tr-caption" style="text-align: center;">Yay, I'll be there! </td></tr></tbody></table><br />
